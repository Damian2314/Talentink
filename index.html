<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TalentInk ‚Äî AI Writing Toolkit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Humanize text, generate cover letters, and create social posts. 2 free generations." />
  <meta name="theme-color" content="#0b0b13">

  <!-- FAVICON (logo in browser tab) -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0%25' stop-color='%237c3aed'/%3E%3Cstop offset='100%25' stop-color='%234f46e5'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='64' height='64' rx='14' fill='url(%23g)'/%3E%3Cpath d='M18 44c10-11 18-20 28-28' stroke='white' stroke-width='5' stroke-linecap='round'/%3E%3Cpath d='M22 24c6-5 12-7 20-8' stroke='rgba(255,255,255,.55)' stroke-width='4' stroke-linecap='round'/%3E%3C/svg%3E">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b13;
      --card:#111225;
      --text:#e9e9ff;
      --muted:#a7a7c9;
      --line:rgba(255,255,255,.10);
      --brand:#7c3aed;
      --brand2:#4f46e5;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 800px at 10% 10%, rgba(124,58,237,.28), transparent 60%),
        radial-gradient(900px 700px at 90% 20%, rgba(79,70,229,.22), transparent 55%),
        radial-gradient(900px 700px at 55% 95%, rgba(34,197,94,.12), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    .wrap{max-width:1100px; margin:0 auto; padding:28px 18px 60px}
    .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:20px;}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px;}
    .logo{
      width:38px; height:38px; border-radius:12px;
      background: linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow: 0 10px 30px rgba(124,58,237,.35);
      position:relative;
      display:grid; place-items:center;
      overflow:hidden;
    }
    .logo:after{content:""; position:absolute; inset:10px 11px; border-radius:10px; border:2px solid rgba(255,255,255,.6);}
    .logo svg{width:20px; height:20px; z-index:2; filter: drop-shadow(0 10px 18px rgba(0,0,0,.28));}
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:10px 12px; border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius:999px; color:var(--muted); font-size:13px;
    }
    .btn{
      border:0; cursor:pointer; font-weight:700;
      padding:12px 14px; border-radius:14px;
      background: rgba(255,255,255,.06);
      color:var(--text);
      border:1px solid var(--line);
      transition:.18s;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.09)}
    .btn.primary{
      background: linear-gradient(135deg, var(--brand), var(--brand2));
      border:0;
      box-shadow: 0 14px 40px rgba(124,58,237,.28);
    }
    .btn.primary:hover{filter:brightness(1.05)}
    .hero{display:grid; grid-template-columns: 1.2fr .8fr; gap:18px; align-items:stretch; margin-top:10px;}
    @media (max-width: 920px){ .hero{grid-template-columns:1fr} }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hd{padding:18px 18px 0;}
    h1{margin:8px 0 10px; font-size:44px; line-height:1.02; letter-spacing:-.8px;}
    @media (max-width: 520px){ h1{font-size:36px} }
    .sub{color:var(--muted); font-size:15px; line-height:1.55; margin:0 0 18px; max-width:65ch;}
    .tabs{display:flex; gap:8px; flex-wrap:wrap; padding:0 18px 18px;}
    .tab{
      padding:10px 12px; border-radius:999px; border:1px solid var(--line);
      background: rgba(255,255,255,.04); color:var(--muted);
      font-weight:700; font-size:13px; cursor:pointer; transition:.18s;
      display:flex; align-items:center; gap:8px;
    }
    .tab.active{color:var(--text); background: rgba(124,58,237,.18); border-color: rgba(124,58,237,.45);}
    .tab:hover{transform: translateY(-1px)}
    .tool{padding:18px; border-top:1px solid var(--line); background: rgba(0,0,0,.15);}
    label{display:block; font-size:12px; color:var(--muted); margin:12px 0 8px}
    textarea, input, select{
      width:100%; padding:12px; border-radius:14px; border:1px solid var(--line);
      background: rgba(0,0,0,.25); color:var(--text); outline:none; font-size:14px;
    }
    textarea{min-height:150px; resize:vertical}
    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 620px){ .grid2{grid-template-columns:1fr} }
    .actions{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-top:14px;}
    .leftActions{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .mini{font-size:12px; color:var(--muted); padding:8px 10px; border:1px dashed rgba(255,255,255,.18); border-radius:12px; background: rgba(255,255,255,.03);}
    .result{margin-top:14px; border-radius:14px; border:1px solid var(--line); background: rgba(0,0,0,.22); padding:12px; display:none;}
    .result pre{margin:0; white-space:pre-wrap; word-wrap:break-word; font-family:Inter,system-ui,sans-serif; font-size:14px; line-height:1.6;}
    .side{padding:18px; display:flex; flex-direction:column; gap:12px;}
    .box{border:1px solid var(--line); border-radius: var(--radius); padding:14px; background: rgba(255,255,255,.04);}
    .side h3{margin:0 0 8px; font-size:14px}
    .side p{margin:0; color:var(--muted); font-size:13px; line-height:1.5}
    .pricing{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;}
    .priceCard{padding:14px; border-radius:16px; border:1px solid var(--line); background: rgba(0,0,0,.20);}
    .priceCard strong{display:block; font-size:14px; margin-bottom:4px}
    .priceCard span{color:var(--muted); font-size:12px}
    .paywall{margin-top:14px; border-radius:16px; border:1px solid rgba(245,158,11,.28); background: rgba(245,158,11,.08); padding:14px; display:none;}
    .paywall h4{margin:0 0 6px}
    .paywall p{margin:0 0 10px; color:var(--muted); font-size:13px; line-height:1.5}
    .payButtons{display:flex; gap:10px; flex-wrap:wrap}
    .btn.ghost{background: rgba(255,255,255,.04)}
    .footer{margin-top:22px; color:rgba(255,255,255,.45); font-size:12px; text-align:center;}
    .spinner{width:16px; height:16px; border-radius:999px; border:2px solid rgba(255,255,255,.25); border-top-color: rgba(255,255,255,.9); display:inline-block; animation: spin .8s linear infinite; vertical-align:middle;}
    @keyframes spin{to{transform:rotate(360deg)}}
    .toast{position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background: rgba(0,0,0,.7); border:1px solid var(--line); color:var(--text); padding:10px 12px; border-radius:999px; font-size:13px; display:none; z-index:50;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-label="TalentInk logo">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M6 17.5c4.2-4.7 7.6-9 12-12" stroke="rgba(255,255,255,.88)" stroke-width="2.2" stroke-linecap="round"/>
            <path d="M7.2 9.2c1.3-1.3 3.6-2.6 6.4-2.8" stroke="rgba(255,255,255,.55)" stroke-width="2.2" stroke-linecap="round"/>
            <path d="M10.2 19.3c2.2-.2 4.8-1.6 6.6-3.6" stroke="rgba(255,255,255,.55)" stroke-width="2.2" stroke-linecap="round"/>
          </svg>
        </div>

        <span id="ui_brand">TalentInk</span>
        <span class="pill" id="ui_pill">‚ú® 3 tools ‚Ä¢ 2 free generations</span>
      </div>

      <div style="display:flex; gap:10px; align-items:center;">
        <button class="btn" id="resetBtn">Reset free counter</button>
        <button class="btn primary" id="pricingBtn">Pricing</button>
      </div>
    </div>

    <div class="hero">
      <div class="card">
        <div class="hd">
          <div class="pill" id="ui_heroPill">Fast ‚Ä¢ Clean ‚Ä¢ Human-quality writing</div>
          <h1 id="ui_title">Write better in seconds.</h1>
          <p class="sub" id="ui_sub">
            Humanize text, generate a tailored cover letter, or create social posts that don‚Äôt sound like a bot.
            Start free ‚Äî no account needed.
          </p>
        </div>

        <div class="tabs">
          <button class="tab active" data-tool="humanize" id="tab_humanize">üß† Humanize</button>
          <button class="tab" data-tool="coverletter" id="tab_cover">üíº Cover Letter</button>
          <button class="tab" data-tool="social" id="tab_social">üì£ Social Post</button>
        </div>

        <div class="tool" id="toolArea"></div>
      </div>

      <div class="card">
        <div class="side">
          <div class="box">
            <h3 id="ui_freeTitle">Free limit</h3>
            <p id="freeInfo">You have 2 free generations available.</p>
          </div>

          <div class="box">
            <h3 id="ui_getTitle">What you get</h3>
            <p id="ui_get1">‚úÖ Natural rewriting</p>
            <p id="ui_get2">‚úÖ Multi-language output</p>
            <p id="ui_get3">‚úÖ Copy & save results</p>
          </div>

          <div class="box">
            <h3 id="ui_priceTitle">Pricing (next step)</h3>
            <p id="ui_priceNote" style="margin-top:8px; color:var(--muted); font-size:13px;">
              We‚Äôll connect payments after the MVP is stable.
            </p>
            <div class="pricing">
              <div class="priceCard">
                <strong id="ui_price1">3 generations ‚Äî $2</strong>
                <span id="ui_price1b">Pay as you go</span>
              </div>
              <div class="priceCard">
                <strong id="ui_price2">10 generations ‚Äî $5</strong>
                <span id="ui_price2b">Best value</span>
              </div>
            </div>
          </div>

          <div class="paywall" id="paywall">
            <h4 id="ui_payTitle">Free limit reached</h4>
            <p id="ui_payText">
              You‚Äôve used your 2 free generations on this device.
              Next step: payments + accounts to unlock more.
            </p>
            <div class="payButtons">
              <button class="btn primary" id="buyBtn">Unlock more (soon)</button>
              <button class="btn ghost" id="learnBtn">How it works</button>
            </div>
          </div>

          <div class="footer">¬© <span id="yr"></span> <span id="ui_footerBrand">TalentInk</span></div>

          <!-- Language switch (UI) -->
          <div class="box" style="margin-top:-4px;">
            <h3 id="ui_langTitle">Language</h3>
            <select id="lang">
              <option value="en">English</option>
              <option value="ru">–†—É—Å—Å–∫–∏–π</option>
              <option value="es">Espa√±ol</option>
              <option value="de">Deutsch</option>
              <option value="fr">Fran√ßais</option>
            </select>
            <p id="ui_langHint" style="margin-top:8px;">(UI only for now ‚Äî translation will be expanded later)</p>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const FREE_LIMIT = 2;
    const LS_KEY = "ti_free_used_v1";
    const LANG_KEY = "ti_lang_v2";
    const state = { tool: "humanize", loading: false };

    // ---- i18n (full UI) ----
    const I18N = {
      en: {
        pill: (n)=>`‚ú® 3 tools ‚Ä¢ ${n} free generations`,
        resetBtn: "Reset free counter",
        pricingBtn: "Pricing",

        heroPill: "Fast ‚Ä¢ Clean ‚Ä¢ Human-quality writing",
        title: "Write better in seconds.",
        sub: "Humanize text, generate a tailored cover letter, or create social posts that don‚Äôt sound like a bot. Start free ‚Äî no account needed.",

        tabHumanize: "üß† Humanize",
        tabCover: "üíº Cover Letter",
        tabSocial: "üì£ Social Post",

        freeTitle: "Free limit",
        freeInfo: (left)=> left>0 ? `You have ${left} free generation${left===1?"":"s"} available.` : "Free limit reached.",

        getTitle: "What you get",
        get1: "‚úÖ Natural rewriting",
        get2: "‚úÖ Multi-language output",
        get3: "‚úÖ Copy & save results",

        priceTitle: "Pricing (next step)",
        priceNote: "We‚Äôll connect payments after the MVP is stable.",
        price1: "3 generations ‚Äî $2",
        price1b: "Pay as you go",
        price2: "10 generations ‚Äî $5",
        price2b: "Best value",

        payTitle: "Free limit reached",
        payText: "You‚Äôve used your 2 free generations on this device. Next step: payments + accounts to unlock more.",
        buyBtn: "Unlock more (soon)",
        learnBtn: "How it works",

        footerBrand: "TalentInk",
        langTitle: "Language",
        langHint: "(UI only for now ‚Äî translation will be expanded later)",

        // Tools common
        labelTone: "Tone",
        labelLanguage: "Language",
        btnCopy: "Copy",
        btnSave: "Save .txt",

        toneNeutral: "Neutral",
        toneProfessional: "Professional",
        toneFriendly: "Friendly",
        toneConfident: "Confident",
        toneCreative: "Creative",

        langAuto: "Auto",
        langEnglish: "English",
        langRussian: "Russian",
        langSpanish: "Spanish",
        langGerman: "German",
        langFrench: "French",

        // Tool: Humanize
        h_labelText: "Text to humanize",
        h_placeholder: "Paste AI text or any text...",
        h_btn: "‚ú® Humanize",
        h_mini: "Keeps meaning ‚Ä¢ improves flow",

        // Tool: Cover letter
        c_jobTitle: "Job title",
        c_jobTitlePh: "e.g., Junior Frontend Developer",
        c_company: "Company (optional)",
        c_companyPh: "e.g., Acme Inc.",
        c_bg: "Your experience / strengths (bullet points)",
        c_bgPh: "- 1 year React\n- Strong communication\n- Portfolio: ...",
        c_desc: "Job description (paste)",
        c_descPh: "Paste job description here...",
        c_btn: "üíº Generate letter",
        c_mini: "Tailored ‚Ä¢ hiring-friendly",
        c_toneProfessional: "Professional",
        c_toneWarm: "Warm",
        c_toneShort: "Short & direct",

        // Tool: Social
        s_topic: "What is your post about?",
        s_topicPh: "e.g., I launched an AI tool that humanizes text...",
        s_platform: "Platform",
        s_style: "Style",
        s_len: "Length",
        s_btn: "üì£ Generate post",
        s_mini: "Hook ‚Ä¢ structure ‚Ä¢ CTA",
        s_styleSimple: "Simple",
        s_styleHype: "Hype",
        s_styleEdu: "Educational",
        s_styleStory: "Story",
        s_stylePro: "Professional",
        s_lenShort: "Short",
        s_lenMed: "Medium",
        s_lenLong: "Long",
        s_plTg: "Telegram",
        s_plIg: "Instagram",
        s_plX: "Twitter/X",
        s_plLi: "LinkedIn",

        // Toasts / errors
        t_saved: "Saved ‚úÖ",
        t_done: "Done ‚úÖ",
        t_copied: "Copied ‚ú®",
        t_savedFile: "Saved ‚úÖ",
        t_counterReset: "Counter reset",
        t_freeLimit: "Free limit reached.",
        t_pasteFirst: "Paste text first.",
        t_fillRequired: "Fill required fields.",
        t_describeTopic: "Describe your topic.",
        t_nothingCopy: "Nothing to copy.",
        t_nothingSave: "Nothing to save.",
        t_requestFailed: "Request failed",
        t_network: "Network error",
        t_paymentsNext: "Payments next ‚úÖ",
        t_howWorks: "We‚Äôll add paywall soon"
      },

      ru: {
        pill: (n)=>`‚ú® 3 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ ‚Ä¢ ${n} –±–µ—Å–ø–ª–∞—Ç–Ω${n===1?"–∞—è":"—ã–µ"} –ø–æ–ø—ã—Ç${n===1?"–∫–∞":"–∫–∏"}`,
        resetBtn: "–°–±—Ä–æ—Å–∏—Ç—å —Å—á—ë—Ç—á–∏–∫",
        pricingBtn: "–¶–µ–Ω—ã",

        heroPill: "–ë—ã—Å—Ç—Ä–æ ‚Ä¢ –ß–∏—Å—Ç–æ ‚Ä¢ –ö–∞–∫ —á–µ–ª–æ–≤–µ–∫",
        title: "–ü–∏—à–∏ –ª—É—á—à–µ –∑–∞ —Å–µ–∫—É–Ω–¥—ã.",
        sub: "–û—á–µ–ª–æ–≤–µ—á—å —Ç–µ–∫—Å—Ç, —Å–¥–µ–ª–∞–π —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –∏–ª–∏ –ø–æ—Å—Ç –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π –±–µ–∑ ¬´–±–æ—Ç-—Å—Ç–∏–ª—è¬ª. –ù–∞—á–Ω–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî –∞–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω—É–∂–µ–Ω.",

        tabHumanize: "üß† –û—á–µ–ª–æ–≤–µ—á–∏—Ç—å",
        tabCover: "üíº –°–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ",
        tabSocial: "üì£ –ü–æ—Å—Ç –≤ —Å–æ—Ü—Å–µ—Ç–∏",

        freeTitle: "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç",
        freeInfo: (left)=> left>0 ? `–û—Å—Ç–∞–ª–æ—Å—å ${left} –±–µ—Å–ø–ª–∞—Ç–Ω${left===1?"–∞—è":"—ã–µ"} –ø–æ–ø—ã—Ç${left===1?"–∫–∞":"–∫–∏"}.` : "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω.",

        getTitle: "–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ",
        get1: "‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç",
        get2: "‚úÖ –í—ã–≤–æ–¥ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö",
        get3: "‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å",

        priceTitle: "–û–ø–ª–∞—Ç–∞ (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)",
        priceNote: "–ü–æ–¥–∫–ª—é—á–∏–º –ø–ª–∞—Ç–µ–∂–∏ –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ MVP.",
        price1: "3 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Äî $2",
        price1b: "–û–ø–ª–∞—Ç–∞ –ø–æ —Ñ–∞–∫—Ç—É",
        price2: "10 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π ‚Äî $5",
        price2b: "–í—ã–≥–æ–¥–Ω–µ–µ",

        payTitle: "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω",
        payText: "–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ 2 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –î–∞–ª—å—à–µ: –ø–ª–∞—Ç–µ–∂–∏ + –∞–∫–∫–∞—É–Ω—Ç—ã, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –±–æ–ª—å—à–µ.",
        buyBtn: "–û—Ç–∫—Ä—ã—Ç—å –±–æ–ª—å—à–µ (—Å–∫–æ—Ä–æ)",
        learnBtn: "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç",

        footerBrand: "TalentInk",
        langTitle: "–Ø–∑—ã–∫",
        langHint: "(–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –ø–æ–∑–∂–µ —Ä–∞—Å—à–∏—Ä–∏–º –ø–µ—Ä–µ–≤–æ–¥)",

        labelTone: "–¢–æ–Ω",
        labelLanguage: "–Ø–∑—ã–∫",
        btnCopy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
        btnSave: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å .txt",

        toneNeutral: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π",
        toneProfessional: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π",
        toneFriendly: "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π",
        toneConfident: "–£–≤–µ—Ä–µ–Ω–Ω—ã–π",
        toneCreative: "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π",

        langAuto: "–ê–≤—Ç–æ",
        langEnglish: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",
        langRussian: "–†—É—Å—Å–∫–∏–π",
        langSpanish: "–ò—Å–ø–∞–Ω—Å–∫–∏–π",
        langGerman: "–ù–µ–º–µ—Ü–∫–∏–π",
        langFrench: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π",

        h_labelText: "–¢–µ–∫—Å—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è",
        h_placeholder: "–í—Å—Ç–∞–≤—å AI-—Ç–µ–∫—Å—Ç –∏–ª–∏ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç...",
        h_btn: "‚ú® –û—á–µ–ª–æ–≤–µ—á–∏—Ç—å",
        h_mini: "–°–º—ã—Å–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Ä¢ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç",

        c_jobTitle: "–î–æ–ª–∂–Ω–æ—Å—Ç—å",
        c_jobTitlePh: "–Ω–∞–ø—Ä–∏–º–µ—Ä, Junior Frontend Developer",
        c_company: "–ö–æ–º–ø–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
        c_companyPh: "–Ω–∞–ø—Ä–∏–º–µ—Ä, Acme Inc.",
        c_bg: "–í–∞—à –æ–ø—ã—Ç / —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (–ø—É–Ω–∫—Ç—ã)",
        c_bgPh: "- 1 –≥–æ–¥ React\n- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è\n- –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ: ...",
        c_desc: "–û–ø–∏—Å–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏ (–≤—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç)",
        c_descPh: "–í—Å—Ç–∞–≤—å –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏...",
        c_btn: "üíº –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Å—å–º–æ",
        c_mini: "–ü–æ –≤–∞–∫–∞–Ω—Å–∏–∏ ‚Ä¢ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è HR",
        c_toneProfessional: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ",
        c_toneWarm: "–¢–µ–ø–ª–æ",
        c_toneShort: "–ö–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É",

        s_topic: "–û —á—ë–º –≤–∞—à –ø–æ—Å—Ç?",
        s_topicPh: "–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ø –∑–∞–ø—É—Å—Ç–∏–ª AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç —Ç–µ–∫—Å—Ç –∂–∏–≤—ã–º...",
        s_platform: "–ü–ª–æ—â–∞–¥–∫–∞",
        s_style: "–°—Ç–∏–ª—å",
        s_len: "–î–ª–∏–Ω–∞",
        s_btn: "üì£ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç",
        s_mini: "–•—É–∫ ‚Ä¢ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Ä¢ –ø—Ä–∏–∑—ã–≤",
        s_styleSimple: "–ü—Ä–æ—Å—Ç–æ",
        s_styleHype: "–•–∞–π–ø",
        s_styleEdu: "–û–±—É—á–∞—é—â–µ",
        s_styleStory: "–ò—Å—Ç–æ—Ä–∏—è",
        s_stylePro: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ",
        s_lenShort: "–ö–æ—Ä–æ—Ç–∫–∏–π",
        s_lenMed: "–°—Ä–µ–¥–Ω–∏–π",
        s_lenLong: "–î–ª–∏–Ω–Ω—ã–π",
        s_plTg: "Telegram",
        s_plIg: "Instagram",
        s_plX: "Twitter/X",
        s_plLi: "LinkedIn",

        t_saved: "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úÖ",
        t_done: "–ì–æ—Ç–æ–≤–æ ‚úÖ",
        t_copied: "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ ‚ú®",
        t_savedFile: "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úÖ",
        t_counterReset: "–°—á—ë—Ç—á–∏–∫ —Å–±—Ä–æ—à–µ–Ω",
        t_freeLimit: "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω.",
        t_pasteFirst: "–°–Ω–∞—á–∞–ª–∞ –≤—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç.",
        t_fillRequired: "–ó–∞–ø–æ–ª–Ω–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.",
        t_describeTopic: "–û–ø–∏—à–∏ —Ç–µ–º—É –ø–æ—Å—Ç–∞.",
        t_nothingCopy: "–ù–µ—á–µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å.",
        t_nothingSave: "–ù–µ—á–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å.",
        t_requestFailed: "–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞",
        t_network: "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏",
        t_paymentsNext: "–ü–ª–∞—Ç–µ–∂–∏ ‚Äî —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚úÖ",
        t_howWorks: "–°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º paywall"
      },

      // –æ—Å—Ç–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–∏ –ø–æ–∫–∞ fallback –Ω–∞ EN (–º–æ–∂–Ω–æ –ø–æ—Ç–æ–º –¥–æ–ø–∏—Å–∞—Ç—å)
      es: null,
      de: null,
      fr: null
    };

    function getLang(){
      const saved = localStorage.getItem(LANG_KEY) || "en";
      return I18N[saved] ? saved : "en";
    }

    function dict(){
      const l = getLang();
      return I18N[l] || I18N.en;
    }

    function t(key, ...args){
      const d = dict();
      const val = d[key] ?? I18N.en[key];
      return (typeof val === "function") ? val(...args) : (val ?? "");
    }

    function getUsed(){ return Number(localStorage.getItem(LS_KEY) || 0); }
    function setUsed(v){ localStorage.setItem(LS_KEY, String(v)); renderFreeInfo(); updatePill(); }
    function freeLeft(){ return Math.max(0, FREE_LIMIT - getUsed()); }

    function toast(msg){
      const el = document.getElementById("toast");
      el.textContent = msg;
      el.style.display = "block";
      setTimeout(()=> el.style.display = "none", 1800);
    }

    function updatePill(){
      document.getElementById("ui_pill").textContent = t("pill", FREE_LIMIT);
    }

    function renderFreeInfo(){
      const left = freeLeft();
      document.getElementById("freeInfo").textContent = t("freeInfo", left);
      document.getElementById("paywall").style.display = left === 0 ? "block" : "none";
    }

    // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏
    function captureToolValues(){
      const root = document.getElementById("toolArea");
      const map = {};
      if(!root) return map;
      root.querySelectorAll("input, textarea, select").forEach(el=>{
        if(el.id) map[el.id] = el.value;
      });
      return map;
    }

    function restoreToolValues(map){
      const root = document.getElementById("toolArea");
      if(!root) return;
      Object.keys(map).forEach(id=>{
        const el = root.querySelector("#"+CSS.escape(id));
        if(el) el.value = map[id];
      });
    }

    function toolHumanize(){
      return `
        <label>${t("h_labelText")}</label>
        <textarea id="inputText" placeholder="${t("h_placeholder")}"></textarea>

        <div class="grid2">
          <div>
            <label>${t("labelTone")}</label>
            <select id="tone">
              <option value="Neutral">${t("toneNeutral")}</option>
              <option value="Professional">${t("toneProfessional")}</option>
              <option value="Friendly">${t("toneFriendly")}</option>
              <option value="Confident">${t("toneConfident")}</option>
              <option value="Creative">${t("toneCreative")}</option>
            </select>
          </div>
          <div>
            <label>${t("labelLanguage")}</label>
            <select id="language">
              <option value="Auto">${t("langAuto")}</option>
              <option value="English">${t("langEnglish")}</option>
              <option value="Russian">${t("langRussian")}</option>
              <option value="Spanish">${t("langSpanish")}</option>
              <option value="German">${t("langGerman")}</option>
              <option value="French">${t("langFrench")}</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <div class="leftActions">
            <button class="btn primary" id="goBtn" data-label="${t("h_btn")}">${t("h_btn")}</button>
            <span class="mini">${t("h_mini")}</span>
          </div>
          <div class="leftActions">
            <button class="btn" id="copyBtn">${t("btnCopy")}</button>
            <button class="btn" id="saveBtn">${t("btnSave")}</button>
          </div>
        </div>

        <div class="result" id="resultBox"><pre id="resultText"></pre></div>
      `;
    }

    function toolCoverLetter(){
      return `
        <label>${t("c_jobTitle")}</label>
        <input id="jobTitle" placeholder="${t("c_jobTitlePh")}" />

        <label>${t("c_company")}</label>
        <input id="company" placeholder="${t("c_companyPh")}" />

        <label>${t("c_bg")}</label>
        <textarea id="background" placeholder="${t("c_bgPh")}"></textarea>

        <label>${t("c_desc")}</label>
        <textarea id="jobDesc" placeholder="${t("c_descPh")}"></textarea>

        <div class="grid2">
          <div>
            <label>${t("labelLanguage")}</label>
            <select id="language">
              <option value="English">${t("langEnglish")}</option>
              <option value="Russian">${t("langRussian")}</option>
              <option value="Spanish">${t("langSpanish")}</option>
              <option value="German">${t("langGerman")}</option>
              <option value="French">${t("langFrench")}</option>
            </select>
          </div>
          <div>
            <label>${t("labelTone")}</label>
            <select id="tone">
              <option value="Professional">${t("c_toneProfessional")}</option>
              <option value="Warm">${t("c_toneWarm")}</option>
              <option value="Confident">${t("toneConfident")}</option>
              <option value="Short & direct">${t("c_toneShort")}</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <div class="leftActions">
            <button class="btn primary" id="goBtn" data-label="${t("c_btn")}">${t("c_btn")}</button>
            <span class="mini">${t("c_mini")}</span>
          </div>
          <div class="leftActions">
            <button class="btn" id="copyBtn">${t("btnCopy")}</button>
            <button class="btn" id="saveBtn">${t("btnSave")}</button>
          </div>
        </div>

        <div class="result" id="resultBox"><pre id="resultText"></pre></div>
      `;
    }

    function toolSocial(){
      return `
        <label>${t("s_topic")}</label>
        <textarea id="topic" placeholder="${t("s_topicPh")}"></textarea>

        <div class="grid2">
          <div>
            <label>${t("s_platform")}</label>
            <select id="platform">
              <option value="Telegram">${t("s_plTg")}</option>
              <option value="Instagram">${t("s_plIg")}</option>
              <option value="Twitter/X">${t("s_plX")}</option>
              <option value="LinkedIn">${t("s_plLi")}</option>
            </select>
          </div>
          <div>
            <label>${t("s_style")}</label>
            <select id="tone">
              <option value="Simple">${t("s_styleSimple")}</option>
              <option value="Hype">${t("s_styleHype")}</option>
              <option value="Educational">${t("s_styleEdu")}</option>
              <option value="Story">${t("s_styleStory")}</option>
              <option value="Professional">${t("s_stylePro")}</option>
            </select>
          </div>
        </div>

        <div class="grid2">
          <div>
            <label>${t("labelLanguage")}</label>
            <select id="language">
              <option value="English">${t("langEnglish")}</option>
              <option value="Russian">${t("langRussian")}</option>
              <option value="Spanish">${t("langSpanish")}</option>
              <option value="German">${t("langGerman")}</option>
              <option value="French">${t("langFrench")}</option>
            </select>
          </div>
          <div>
            <label>${t("s_len")}</label>
            <select id="length">
              <option value="Short">${t("s_lenShort")}</option>
              <option value="Medium" selected>${t("s_lenMed")}</option>
              <option value="Long">${t("s_lenLong")}</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <div class="leftActions">
            <button class="btn primary" id="goBtn" data-label="${t("s_btn")}">${t("s_btn")}</button>
            <span class="mini">${t("s_mini")}</span>
          </div>
          <div class="leftActions">
            <button class="btn" id="copyBtn">${t("btnCopy")}</button>
            <button class="btn" id="saveBtn">${t("btnSave")}</button>
          </div>
        </div>

        <div class="result" id="resultBox"><pre id="resultText"></pre></div>
      `;
    }

    function renderTool(preserved){
      const area = document.getElementById("toolArea");
      if(state.tool === "humanize") area.innerHTML = toolHumanize();
      if(state.tool === "coverletter") area.innerHTML = toolCoverLetter();
      if(state.tool === "social") area.innerHTML = toolSocial();

      if(preserved) restoreToolValues(preserved);

      document.getElementById("goBtn").addEventListener("click", onGenerate);
      document.getElementById("copyBtn").addEventListener("click", onCopy);
      document.getElementById("saveBtn").addEventListener("click", onSave);
    }

    function setLoading(isLoading){
      state.loading = isLoading;
      const btn = document.getElementById("goBtn");
      if(!btn) return;
      btn.disabled = isLoading;
      btn.innerHTML = isLoading ? `<span class="spinner"></span> Generating...` : (btn.dataset.label || "Generate");
    }

    function readCommon(){
      return {
        tone: (document.getElementById("tone")?.value || "Neutral"),
        language: (document.getElementById("language")?.value || "Auto")
      };
    }

    async function onGenerate(){
      if(freeLeft() <= 0){
        toast(t("t_freeLimit"));
        document.getElementById("paywall").scrollIntoView({behavior:"smooth", block:"center"});
        return;
      }

      let payload = { tool: state.tool, ...readCommon() };

      if(state.tool === "humanize"){
        payload.inputText = (document.getElementById("inputText").value || "").trim();
        if(!payload.inputText) return toast(t("t_pasteFirst"));
      }

      if(state.tool === "coverletter"){
        payload.jobTitle = (document.getElementById("jobTitle").value || "").trim();
        payload.company = (document.getElementById("company").value || "").trim();
        payload.background = (document.getElementById("background").value || "").trim();
        payload.jobDesc = (document.getElementById("jobDesc").value || "").trim();
        if(!payload.jobTitle || !payload.background || !payload.jobDesc) return toast(t("t_fillRequired"));
      }

      if(state.tool === "social"){
        payload.topic = (document.getElementById("topic").value || "").trim();
        payload.platform = (document.getElementById("platform").value || "Telegram");
        payload.length = (document.getElementById("length").value || "Medium");
        if(!payload.topic) return toast(t("t_describeTopic"));
      }

      const resultBox = document.getElementById("resultBox");
      const resultText = document.getElementById("resultText");
      resultBox.style.display = "none";
      resultText.textContent = "";

      setLoading(true);
      try{
        const r = await fetch("/api/generate", {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });

        const data = await r.json();
        if(!r.ok){
          toast(data?.error || t("t_requestFailed"));
          return;
        }

        resultBox.style.display = "block";
        resultText.textContent = data.outputText || "";
        setUsed(getUsed() + 1);
        toast(t("t_done"));
      } catch(e){
        toast(t("t_network"));
      } finally {
        setLoading(false);
      }
    }

    function onCopy(){
      const text = document.getElementById("resultText")?.textContent || "";
      if(!text.trim()) return toast(t("t_nothingCopy"));
      navigator.clipboard.writeText(text);
      toast(t("t_copied"));
    }

    function onSave(){
      const text = document.getElementById("resultText")?.textContent || "";
      if(!text.trim()) return toast(t("t_nothingSave"));
      const blob = new Blob([text], {type:"text/plain;charset=utf-8"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = `talentink-${state.tool}.txt`;
      a.click();
      URL.revokeObjectURL(a.href);
      toast(t("t_savedFile"));
    }

    function applyLanguageToStaticUI(){
      // top / hero
      document.getElementById("resetBtn").textContent = t("resetBtn");
      document.getElementById("pricingBtn").textContent = t("pricingBtn");
      document.getElementById("ui_heroPill").textContent = t("heroPill");
      document.getElementById("ui_title").textContent = t("title");
      document.getElementById("ui_sub").textContent = t("sub");

      // tabs
      document.getElementById("tab_humanize").textContent = t("tabHumanize");
      document.getElementById("tab_cover").textContent = t("tabCover");
      document.getElementById("tab_social").textContent = t("tabSocial");

      // side
      document.getElementById("ui_freeTitle").textContent = t("freeTitle");
      document.getElementById("ui_getTitle").textContent = t("getTitle");
      document.getElementById("ui_get1").textContent = t("get1");
      document.getElementById("ui_get2").textContent = t("get2");
      document.getElementById("ui_get3").textContent = t("get3");

      document.getElementById("ui_priceTitle").textContent = t("priceTitle");
      document.getElementById("ui_priceNote").textContent = t("priceNote");
      document.getElementById("ui_price1").textContent = t("price1");
      document.getElementById("ui_price1b").textContent = t("price1b");
      document.getElementById("ui_price2").textContent = t("price2");
      document.getElementById("ui_price2b").textContent = t("price2b");

      document.getElementById("ui_payTitle").textContent = t("payTitle");
      document.getElementById("ui_payText").textContent = t("payText");
      document.getElementById("buyBtn").textContent = t("buyBtn");
      document.getElementById("learnBtn").textContent = t("learnBtn");

      document.getElementById("ui_footerBrand").textContent = t("footerBrand");

      // lang box
      document.getElementById("ui_langTitle").textContent = t("langTitle");
      document.getElementById("ui_langHint").textContent = t("langHint");

      // pill
      updatePill();

      // free info re-render
      renderFreeInfo();
    }

    // Buttons
    document.getElementById("resetBtn").addEventListener("click", ()=>{
      localStorage.removeItem(LS_KEY);
      renderFreeInfo();
      updatePill();
      toast(t("t_counterReset"));
    });

    document.getElementById("pricingBtn").addEventListener("click", ()=>{
      document.getElementById("paywall").style.display = "block";
      document.getElementById("paywall").scrollIntoView({behavior:"smooth", block:"center"});
    });

    document.getElementById("buyBtn").addEventListener("click", ()=> toast(t("t_paymentsNext")));
    document.getElementById("learnBtn").addEventListener("click", ()=> toast(t("t_howWorks")));

    // Tabs
    document.querySelectorAll(".tab").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
        btn.classList.add("active");
        state.tool = btn.dataset.tool;
        const preserved = captureToolValues();
        renderTool(preserved);
      });
    });

    // Language selector
    const langSelect = document.getElementById("lang");
    langSelect.value = getLang();
    langSelect.addEventListener("change", ()=>{
      const chosen = langSelect.value;
      localStorage.setItem(LANG_KEY, chosen);
      // –æ–±–Ω–æ–≤–∏–º –≤—Å–µ —Ç–µ–∫—Å—Ç—ã + –ø–µ—Ä–µ—Ä–∏—Å—É–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –≤–≤–æ–¥–∞
      applyLanguageToStaticUI();
      const preserved = captureToolValues();
      renderTool(preserved);
      toast(t("t_saved"));
    });

    // init
    document.getElementById("yr").textContent = new Date().getFullYear();

    applyLanguageToStaticUI();
    renderFreeInfo();
    renderTool();
  </script>
</body>
</html>
